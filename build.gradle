/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/6.7/samples
 */


buildscript {
	ext.spigot_version = "1.16.4-R0.1-SNAPSHOT"
	ext.valut_version = "1.7"

	repositories {
		jcenter()
	}
	dependencies {
		classpath 'com.github.jengelman.gradle.plugins:shadow:6.1.0'
	}
}

apply plugin: "java"
apply plugin: 'com.github.johnrengelman.shadow'


repositories {
	mavenCentral()
	mavenLocal()

	maven { url "https://hub.spigotmc.org/nexus/content/repositories/snapshots/" }
	maven { url 'https://papermc.io/repo/repository/maven-public/' }
	maven { url 'https://jitpack.io' }
	maven {
		url = 'https://repo.codemc.org/repository/maven-public'
		content {
			includeGroup "org.bstats"
		}
	}

}


version = "0.2-SNAPSHOT"
sourceCompatibility = "1.8"
targetCompatibility = "1.8"

configurations {
	shadow
	compile.extendsFrom provided
	provided.extendsFrom shadow
}

dependencies {
	implementation 'org.jetbrains:annotations:20.1.0'

	compileOnly "org.spigotmc:spigot-api:$spigot_version"
	compileOnly "com.github.MilkBowl:VaultAPI:$valut_version"
	shadow "org.bstats:bstats-bukkit:1.8"
}

shadowJar {
	classifier(null)
	configurations = [project.configurations.shadow]
	destinationDirectory = file('C:\\Users\\Anton\\Documents\\Dev\\Minecraft\\Creative_Server\\plugins')
	exclude 'META-INF', 'META-INF/**'

	relocate('org.bstats.bukkit', 'de.stamme.basicquests.metrics')
}

tasks.named("assemble").configure {
	dependsOn("shadowJar")
}

